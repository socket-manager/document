<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>DevOps環境 | RuntimeManager | SOCKET-MANAGER Framework For PHP</title>
        <meta name="description" content="SOCKET-MANAGER Framework の RuntimeManager の DevOps環境構築手順と GUIランチャーによるサービス運用管理を解説。CUEI/Oモデルに基づき、サービスの起動・停止・監視・設定保存・JSONダウンロードまでを一元化。リソース監視やチャット機能も搭載。" />
        <meta content="SOCKET-MANAGER, RuntimeManager, GUIランチャー, DevOps環境, CUEI/Oモデル, サービス管理, 起動停止, JSON設定, サービス追加, リソース監視, カスタムモニタリング, ランチャーログ, チャット機能, PHP worker, launcher導入" name="keywords">
        <link rel="canonical" href="https://socket-manager.github.io/document/runtime-manager/dev-ops.html" />

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-LF9W695NNW"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-LF9W695NNW');
        </script>
        <link rel="icon" href="https://socket-manager.github.io/document/favicon.ico" type="image/x-icon" />
        <link type="text/css" rel="stylesheet" href="../css/common.css" media="all" />
        <script src="../js/jquery-3.7.1.min.js"></script>
        <script type="text/javascript" src="../js/common.js"></script>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@graph": [
                {
                    "@type": "TechArticle",
                    "headline": "ランタイムライブラリ（RuntimeManager） - DevOps環境構築とGUIランチャーによるサービス運用管理",
                    "description": "SOCKET-MANAGER Framework の RuntimeManager の DevOps環境構築手順と GUIランチャーによるサービス運用管理を解説。CUEI/Oモデルに基づき、サービスの起動・停止・監視・設定保存・JSONダウンロードまでを一元化。リソース監視やチャット機能も搭載。",
                    "keywords": "SOCKET-MANAGER, RuntimeManager, GUIランチャー, DevOps環境, CUEI/Oモデル, サービス管理, 起動停止, JSON設定, サービス追加, リソース監視, カスタムモニタリング, ランチャーログ, チャット機能, PHP worker, launcher導入",
                    "image": "https://socket-manager.github.io/document/runtime-manager/img/dev-ops/GUI-main.png",
                    "articleSection": ["Technical Documentation", "Runtime Services", "DevOps Environment Setup", "PHP Programming"],
                    "author": {
                        "@type": "Person",
                        "name": "SOCKET-MANAGER開発チーム"
                    },
                    "publisher": {
                        "@type": "Organization",
                        "name": "SOCKET-MANAGER",
                        "logo": {
                            "@type": "ImageObject",
                            "url": "https://socket-manager.github.io/document/logo.png",
                            "width": 355,
                            "height": 50
                        }
                    },
                    "mainEntityOfPage": {
                        "@type": "TechArticle",
                        "@id": "https://socket-manager.github.io/document/runtime-manager/dev-ops.html"
                    },
                    "url": "https://socket-manager.github.io/document/runtime-manager/dev-ops.html",
                    "breadcrumb": {
                        "@type": "BreadcrumbList",
                        "itemListElement": [{
                            "@type": "ListItem",
                            "position": 1,
                            "name": "Framework Top",
                            "item": "https://socket-manager.github.io/document/"
                        },{
                            "@type": "ListItem",
                            "position": 2,
                            "name": "RuntimeManagerのご紹介",
                            "item": "https://socket-manager.github.io/document/runtime-manager/"
                        },{
                            "@type": "ListItem",
                            "position": 3,
                            "name": "RuntimeManagerのDevOps環境",
                            "item": "https://socket-manager.github.io/document/runtime-manager/dev-ops.html"
                        }]
                    },
                    "isPartOf": {
                        "@type": "WebSite",
                        "name": "RuntimeManagerのご紹介",
                        "url": "https://socket-manager.github.io/document/runtime-manager/"
                    }
                },
                {
                    "@type": "ItemList",
                    "@id": "https://socket-manager.github.io/document/runtime-manager/",
                    "name": "ランタイムライブラリ - RuntimeManager解説シリーズ",
                    "about": {
                        "@id": "https://socket-manager.github.io/document/runtime-manager/"
                    },
                    "itemListOrder": "http://schema.org/ItemListOrderAscending",
                    "numberOfItems": 8,
                    "itemListElement": [
                        {
                            "@type": "ListItem",
                            "position": 1,
                            "url": "https://socket-manager.github.io/document/runtime-manager/",
                            "name": "RuntimeManagerのご紹介"
                        },
                        {
                            "@type": "ListItem",
                            "position": 2,
                            "url": "https://socket-manager.github.io/document/runtime-manager/event-handler.html",
                            "name": "イベントハンドラの実装ガイド"
                        },
                        {
                            "@type": "ListItem",
                            "position": 3,
                            "url": "https://socket-manager.github.io/document/runtime-manager/init-class.html",
                            "name": "初期化クラスの実装ガイド"
                        },
                        {
                            "@type": "ListItem",
                            "position": 4,
                            "url": "https://socket-manager.github.io/document/runtime-manager/unit-parameter.html",
                            "name": "UNITパラメータクラスの実装ガイド"
                        },
                        {
                            "@type": "ListItem",
                            "position": 5,
                            "url": "https://socket-manager.github.io/document/runtime-manager/runtime-unit.html",
                            "name": "ランタイムUNITクラスの実装ガイド"
                        },
                        {
                            "@type": "ListItem",
                            "position": 6,
                            "url": "https://socket-manager.github.io/document/runtime-manager/main.html",
                            "name": "メイン処理クラスの実装ガイド"
                        },
                        {
                            "@type": "ListItem",
                            "position": 7,
                            "url": "https://socket-manager.github.io/document/runtime-manager/new-project.html",
                            "name": "新規開発環境構築ガイド"
                        },
                        {
                            "@type": "ListItem",
                            "position": 8,
                            "url": "https://socket-manager.github.io/document/runtime-manager/dev-ops.html",
                            "name": "RuntimeManagerのDevOps環境構築ガイド"
                        }
                    ]
                }
            ]
        }
        </script>
    </head>
    <body>
        <div class="layout">
            <div class="menu" role="navigation" aria-label="ページメニュー">
                <h2 class="menu-title">SOCKET-MANAGER</h2>
                <h4 class="menu-reference menu-page-title-bottom"><a href="../" target="_blank">&gt;&gt; Framework Top</a></h4>
                <h2 class="menu-label">MAIN-MENU</h2>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./index.html">▶RuntimeManagerのご紹介</a></h3>

                    <h3 class="menu-page-title-link"><a href="./event-handler.html">▶イベントハンドラについて</a></h3>

                </div>
                <h3 class="menu-label-sub">IMPLEMENT</h3>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./init-class.html">▶初期化クラス</a></h3>

                    <h3 class="menu-page-title-link"><a href="./unit-parameter.html">▶UNITパラメータクラス</a></h3>

                    <h3 class="menu-page-title-link"><a href="./runtime-unit.html">▶ランタイムUNITクラス</a></h3>

                    <h3 class="menu-page-title-link"><a href="./main.html">▶メイン処理クラス</a></h3>

                </div>
                <h3 class="menu-label-sub">PROJECT</h3>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./new-project.html">▶新規開発環境</a></h3>

                    <h3 class="menu-page-title">▼DevOps環境</h3>

                    <ul>
                        <li><a href="./dev-ops.html#begin">はじめに</a></li>
                    </ul>
                    <ul>
                        <li><a href="./dev-ops.html#setup">環境の導入方法</a></li>
                    </ul>
                    <ul>
                        <li><a href="./dev-ops.html#make-service">常駐型アプリ作成確認</a></li>
                    </ul>
                    <ul>
                        <li><a href="./dev-ops.html#launcher-use">ランチャーでの起動</a></li>
                    </ul>
                    <ul>
                        <li><a href="./dev-ops.html#last">おわりに</a></li>
                    </ul>

                </div>
                <h2 class="menu-label">ADVANCED</h2>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="../laravel.html" target="_blank">▶Laravelと連携する</a></h3>

                    <h3 class="menu-page-title-link"><a href="../system-setting.html" target="_blank">▶システム設定ファイル</a></h3>

                </div>
                <div class="menu-dummy-for-runtime"></div>
            </div>
            <div class="main" role="main">

                <h1>【DevOps環境】</h1>

                <a id="begin"></a>
                <h2 class="subtitle">はじめに</h2>
                <div class="text-block">

                    SOCKET-MANAGER Framework の RuntimeManager の DevOps環境は、アーキテクチャページで紹介されている CUEI/O モデルに基づいて設計されています。<br />
                    このモデルにより、SOCKET-MANAGER Launcher を活用したサービス運用が可能となり、GUIランチャーを通じてサービスの起動・停止・監視・設定管理を一元化できます。<br />
                    本記事では、DevOps環境における SOCKET-MANAGER Launcher の導入と連携手順を中心に解説します。<br />

                    <br />
                    <h3 class="underline">CUEI/Oモデルとは</h3>

                    CUEI/Oモデルは、SOCKET-MANAGER Frameworkが採用する「CUEIアーキテクチャ」を運用領域まで拡張した設計思想です。<br />
                    CUEIは <strong>Communication（通信抽象化）</strong>、<strong>Union（共有基盤）</strong>、<strong>Event（非同期処理）</strong>、<strong>IPC（サーバー間通信）</strong> の4要素で構成され、効率的かつスケーラブルな通信処理を実現します。<br />
                    これに <strong>Operation（運用管理）</strong> を加えたものがCUEI/Oであり、開発から運用までを一貫してカバーする包括的なモデルです。<br /><br />

                    ※ CUEI、CUEI/Oに関する詳細な説明は<font><a href="./architecture.html">▶アーキテクチャ</a></font>をご覧ください。<br />

                    <br />
                    <h3 class="underline">DevOps環境がこのモデルに準拠している理由</h3>

                    DevOpsは「開発（Dev）」と「運用（Ops）」を統合する文化・仕組みを重視します。CUEI/Oモデルはまさにその思想と一致しており、
                    <ul>
                        <li>開発段階ではCUEIの非同期処理や共有基盤により効率的な実装が可能</li>
                        <li>運用段階では/O（Operation）の仕組みにより監視・管理を統合的に実現</li>
                    </ul>
                    といった形で、DevOpsのライフサイクル全体を自然に支える構造を持っています。<br />
                    そのため、DevOps環境を構築する際にCUEI/Oモデルは理想的な準拠基盤となります。<br />

                    <br />
                    <h3 class="underline">SOCKET-MANAGER LauncherがDevOps運用に適している背景</h3>

                    SOCKET-MANAGER Launcherは、単なるサービス起動ツールではなく、<strong>リソース管理や監視機能を備えたランチャー</strong>に加え、<strong>コミュニケーションツール（チャット）をビルトイン</strong>した統合環境です。これにより、開発から運用までを一貫して支援する「CUEI/O」モデルを実現し、DevOpsの実践に最適化されています。<br /><br />

                    さらに、SOCKET-MANAGER Launcher環境は <strong>SOCKET-MANAGER Framework上の新規開発環境</strong>としての側面も持ち合わせており、以下の特徴を備えています。<br />

                    <ul class="margin-list">
                        <li>
                            <strong>ローカルなどの開発環境において、デベロッパーが運用を見据えたテストを実施できる</strong><br />
                            → 開発段階から実運用に近い条件で検証できるため、リリース後のトラブルを未然に防止。
                        </li>
                        <li>
                            <strong>本番環境へそのまま移行可能</strong><br />
                            → 開発・検証環境と本番環境の差異を最小化し、デプロイ時のリスクを軽減。
                        </li>
                    </ul>

                    このように、SOCKET-MANAGER Launcherは「開発と運用の断絶」を解消し、<strong>開発効率と運用安定性を両立するDevOps基盤</strong>として機能します。<br />

                </div><br />

                <a id="setup"></a>
                <h2 class="subtitle">環境の導入方法</h2>
                <div class="text-block">
                    以下のコマンドでインストールできます。<br />

                    <pre color-change="command" aria-label="DevOps環境のインストール">
> composer create-project socket-manager/launcher <インストール先のディレクトリ名>
                    </pre><br />

                    インストール完了後、プロジェクトルートで<code>php worker</code>コマンドを実行すると以下のようなUsageが表示されます。<br />

                    <pre color-change="command" aria-label="Usage表示">
> php worker

SOCKET-MANAGER Framework 1.16.0

Usage:
  command [arguments]

 main
  app:cli                                        CLI サービス管理ランチャー
  app:gui                                        GUI サービス管理ランチャー
 craft
  craft:init <初期化クラス名>                     初期化クラスの生成
  craft:parameter &lt;UNITパラメータクラス名&gt;        UNITパラメータクラスの生成
  craft:protocol <プロトコルUNIT定義のクラス名>   プロトコルUNIT定義のクラスとステータス名Enumの生成
  craft:command <コマンドUNIT定義のクラス名>      コマンドUNIT定義のクラスとキュー／ステータス名Enumの生成
  craft:main <メイン処理のクラス名>               メイン処理クラスの生成
  craft:setting <設定ファイル名>                  設定ファイルの生成
  craft:locale <メッセージファイル名>             メッセージファイルの生成
 runtime
  runtime:init <初期化クラス名>                   初期化クラスの生成
  runtime:parameter &lt;UNITパラメータクラス名&gt;      UNITパラメータクラスの生成
  runtime:units <ランタイムUNIT定義のクラス名>    ランタイムUNIT定義のクラスとキュー／ステータス名Enumの生成
  runtime:main <メイン処理のクラス名>             メイン処理クラスの生成
                    </pre>

                    ※<code>laravel:command</code>コマンドに関してはLaravel環境でしか表示されません。<br /><br />

                    上記のUsageが表示されていれば、DevOps環境の構築が完了しています。<br />

                </div><br />

                <a id="make-service"></a>
                <h2 class="subtitle">常駐型アプリ作成確認</h2>
                <div class="text-block">

                    それでは動作確認を兼ねて以下のコマンドを実行し、メイン処理クラスを作成します。<br />
                    今回は<code>runtime:main</code>コマンドを使って<code>MainForTest</code>という名前で作成します。<br /><br />

                    以下のように表示されれば成功です。<br />

                    <pre color-change="command" aria-label="MainForTestクラス作成">
> php worker runtime:main MainForTest

[success] メイン処理クラスの生成に成功しました (MainForTest)
                    </pre><br />

                    再度<code>php worker</code>を実行してみます。<br />

                    <pre color-change="command" aria-label="Usage表示">
> php worker

SOCKET-MANAGER Framework 1.16.0

Usage:
  command [arguments]

 main
  app:cli                                        CLI サービス管理ランチャー
  app:gui                                        GUI サービス管理ランチャー
  app:main-for-test                              Command description
 craft
  craft:init <初期化クラス名>                     初期化クラスの生成
  craft:parameter &lt;UNITパラメータクラス名&gt;        UNITパラメータクラスの生成
  craft:protocol <プロトコルUNIT定義のクラス名>   プロトコルUNIT定義のクラスとステータス名Enumの生成
  craft:command <コマンドUNIT定義のクラス名>      コマンドUNIT定義のクラスとキュー／ステータス名Enumの生成
  craft:main <メイン処理のクラス名>               メイン処理クラスの生成
  craft:setting <設定ファイル名>                  設定ファイルの生成
  craft:locale <メッセージファイル名>             メッセージファイルの生成
 runtime
  runtime:init <初期化クラス名>                   初期化クラスの生成
  runtime:parameter &lt;UNITパラメータクラス名&gt;      UNITパラメータクラスの生成
  runtime:units <ランタイムUNIT定義のクラス名>    ランタイムUNIT定義のクラスとキュー／ステータス名Enumの生成
  runtime:main <メイン処理のクラス名>             メイン処理クラスの生成
                    </pre><br />

                    アプリ名<code>main-for-test</code>という名前で登録されている事が確認できれば正常にインストールされています。

                </div><br />

                <a id="launcher-use"></a>
                <h2 class="subtitle">ランチャーでの起動</h2>
                <div class="text-block">

                    ここでは先ほど <code>runtime:main</code> コマンドで作成した <code>app:main-for-test</code> のアプリをランチャーで起動してみます。<br />

                    <br />
                    <h3 class="underline">ランチャー本体（内蔵Websocketサーバー）の起動</h3>

                    プロジェクトルートで以下のコマンドを実行してGUIランチャーを起動します。<br />

                    <pre color-change="command" aria-label="GUIランチャーの起動">
> php worker app:gui
                    </pre>

                    <br />
                    <h3 class="underline">GUI を開く</h3>

                    <code>app/client/launcher.html</code> のファイルをブラウザで開くと、以下の接続フォームが表示されます。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/connection-form.png" target="_blank"><img src="./img/dev-ops/connection-form.png" loading="lazy" alt="接続フォーム" title="接続フォーム" /></a>
                            <figcaption><strong>接続フォーム</strong></figcaption>
                        </figure>
                    </div>

                    <br />
                    <h3 class="underline">ランチャー本体（内蔵Websocketサーバー）と接続</h3>

                    ホスト名／ポート番号／オペレータ名 を入力してから「接続」ボタンを押します。<br />
                    （ランチャーのポート番号はデフォルトで 5000 です）

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/connection-form-input.png" target="_blank"><img src="./img/dev-ops/connection-form-input.png" loading="lazy" alt="入力済み接続フォーム" title="入力済み接続フォーム" /></a>
                            <figcaption><strong>入力済み接続フォーム</strong></figcaption>
                        </figure>
                    </div>

                    するとランチャーとの接続シーケンスが開始され、以下のように CPU／メモリ／ディスクの各リソース情報やサービス一覧／チャット画面などが表示されます。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/GUI-main.png" target="_blank"><img src="./img/dev-ops/GUI-main.png" fetchpriority="high" loading="eager" alt="接続直後のGUI画面" title="接続直後のGUI画面" /></a>
                            <figcaption><strong>接続直後のGUI画面</strong></figcaption>
                        </figure>
                    </div>

                    <br />
                    <h3 class="underline">サービスの追加</h3>

                    初回はサービスが登録されていないので、以下のようにサービス一覧の部分は見出しのみが表示されます。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-list-init.png" target="_blank"><img src="./img/dev-ops/service-list-init.png" loading="lazy" alt="サービス一覧（サービス未登録状態）" title="サービス一覧（サービス未登録状態）" /></a>
                            <figcaption><strong>サービス一覧（サービス未登録状態）</strong></figcaption>
                        </figure>
                    </div>

                    「＋新規サービス追加」ボタンを押すと入力フォームが開くので、必要事項を記入してから「一覧に反映」ボタンを押します。<br />
                    （同じ環境内で管理する場合は実行パスに"."のみ入力します）<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-add-form.png" target="_blank"><img src="./img/dev-ops/service-add-form.png" loading="lazy" alt="サービス追加フォーム" title="サービス追加フォーム" /></a>
                            <figcaption><strong>サービス追加フォーム</strong></figcaption>
                        </figure>
                    </div>

                    以下のように確認画面が表示されるので「OK」ボタンを押すと登録が完了します。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-add-confirm.png" target="_blank"><img src="./img/dev-ops/service-add-confirm.png" loading="lazy" alt="サービス追加時の確認ポップアップ表示" title="サービス追加時の確認ポップアップ表示" /></a>
                            <figcaption><strong>サービス追加時の確認ポップアップ表示</strong></figcaption>
                        </figure>
                    </div>

                    <br />
                    <h3 class="underline">サービスの起動／停止</h3>

                    登録されたサービスは以下の一覧に表示されますので「▶」ボタン押下でサービスを起動できるようになります。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-added.png" target="_blank"><img src="./img/dev-ops/service-added.png" loading="lazy" alt="サービス追加後の一覧表示" title="サービス追加後の一覧表示" /></a>
                            <figcaption><strong>サービス追加後の一覧表示</strong></figcaption>
                        </figure>
                    </div>

                    以下はサービスが起動中の画面ですが、「▶」ボタンが「■」に置き換わっているので、これを押すと停止させる事ができます。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-started.png" target="_blank"><img src="./img/dev-ops/service-started.png" loading="lazy" alt="サービス起動中の画面" title="サービス起動中の画面" /></a>
                            <figcaption><strong>サービス起動中の画面</strong></figcaption>
                        </figure>
                    </div>

                    <br />
                    <h3 class="underline">設定ファイルの保存／ダウンロード</h3>

                    登録したサービス情報は「設定保存」ボタンを押す事で以下の確認ポップアップが表示され、「OK」ボタンを押す事で所定の場所（setting/services.json）に設定ファイルとして保存されます。<br />
                    保存された情報は次回以降も同じ設定で読み込まれます。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-save-confirm.png" target="_blank"><img src="./img/dev-ops/service-save-confirm.png" loading="lazy" alt="設定保存時の確認ポップアップ表示" title="設定保存時の確認ポップアップ表示" /></a>
                            <figcaption><strong>設定保存時の確認ポップアップ表示</strong></figcaption>
                        </figure>
                    </div>

                    「JSONダウンロード」ボタンを押すと以下のダウンロード用のダイアログボックスが表示されますので、設定ファイルの内容に関わらず現在画面に登録されている最新の設定ファイルをダウンロードする事ができます。ダウンロードしたファイルはバックアップ用として保存しておくか、別の環境の設定ファイルとしてご利用頂けます。<br />

                    <div class="img-block">
                        <figure class="center-figure">
                            <a href="./img/dev-ops/service-download.png" target="_blank"><img src="./img/dev-ops/service-download.png" loading="lazy" alt="ダウンロード時のダイアログボックス表示" title="ダウンロード時のダイアログボックス表示" /></a>
                            <figcaption><strong>ダウンロード時のダイアログボックス表示</strong></figcaption>
                        </figure>
                    </div>

                </div><br />

                <a id="last"></a>
                <h2 class="subtitle">おわりに</h2>

                <div class="text-block">

                    今回は常駐型アプリを開発する例として <code>runtime:main</code> のコマンドを使ってメイン処理クラスの作成を行いましたが、この環境は新規開発環境でもあるため、他のコマンドも使って実装していく事になります。<br />
                    さらに大きく分けると<strong>RuntimeManager（常駐型アプリ）</strong>や<strong>SocketManager（ソケット通信アプリ）</strong>の開発基盤でもありますので、それぞれで使えるコマンドも異なります。<br /><br />

                    コマンドの詳細な使い方に関しては、以下のページでご紹介していますので、そちらをご覧ください。<br />

                    <ul class="margin-list">
                        <li>常駐型アプリ開発（runtimeカテゴリのコマンド）⇒<font><a href="./new-project.html" target="_blank">▶新規開発環境（RuntimeManager用）</a></font></li>
                        <li>ソケット通信アプリ開発（craftカテゴリのコマンド）⇒<font><a href="../new-project.html" target="_blank">▶新規開発環境（SocketManager用）</a></font></li>
                    </ul>

                    ランチャーの詳しい操作方法については<font><a href="./launcher/" target="_blank">▶GUI & CLI ランチャー</a></font>のページをご覧ください。<br />
                </div><br />
            </div>
        </div>
    </body>
</html>
