<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>釣りアイテム | LootTables | マインクラフトの環境 | SOCKET-MANAGER Framework For PHP</title>
        <meta name="description" content="マインクラフト（統合版）の釣りアイテム用ルートテーブル（Loot Table）の書き方をご紹介します" />
        <meta content="bedrock,ビヘイビアパック,マインクラフト,統合版,minecraft" name="keywords">

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-LF9W695NNW"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-LF9W695NNW');
        </script>
        <link rel="icon" href="../favicon.ico" type="image/x-icon" />
        <link type="text/css" rel="stylesheet" href="../css/common.css" media="all" />
        <script src="../js/jquery-3.7.1.min.js"></script>
        <script type="text/javascript" src="../js/common.js"></script>
    </head>
    <body>
        <div class="layout">
            <div class="menu">
                <h2 class="menu-title">SOCKET-MANAGER</h2>
                <h4 class="menu-reference menu-page-title-link"><a href="../index.html">&gt;&gt; Framework Top</a></h4>
                <h2 class="menu-label">ENVIRONMENT</h2>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./index.html">▶マインクラフトの環境</a></h3>

                    <h3 class="menu-page-title-link"><a href="./setting.html">▶設定ファイル</a></h3>

                    <h3 class="menu-page-title-link"><a href="./behavior.html">▶ビヘイビアパック適用その１</a></h3>

                    <h3 class="menu-page-title-link"><a href="./behavior2.html">▶ビヘイビアパック適用その２</a></h3>

                    <h3 class="menu-page-title-link"><a href="./addon-begin.html">▶アドオンパックことはじめ</a></h3>

                    <h3 class="menu-page-title-link"><a href="./custom-entity-dummy.html">▶ダミーエンティティ</a></h3>

                    <h3 class="menu-page-title-link"><a href="./custom-entity-sit.html">▶座れるエンティティ</a></h3>

                    <h3 class="menu-page-title-link"><a href="./recipe.html">▶レシピの作り方</a></h3>

                </div>
                <h3 class="menu-label-sub">LootTables</h3>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./loot-table.html">▶基本の書き方</a></h3>

                    <h3 class="menu-page-title">▼釣りアイテム</h3>

                    <ul>
                        <li><a href="./loot-table-fishing.html#begin">はじめに</a></li>
                    </ul>
                    <ul>
                        <li><a href="./loot-table-fishing.html#location">定義ファイルの所在</a></li>
                    </ul>
                    <ul>
                        <li><a href="./loot-table-fishing.html#define">バニラの定義ファイルの内容</a></li>
                    </ul>
                    <ul>
                        <li><a href="./loot-table-fishing.html#fish">fish.jsonの定義</a></li>
                    </ul>
                    <ul>
                        <li><a href="./loot-table-fishing.html#jungle_fish">jungle_fish.jsonの定義</a></li>
                    </ul>
                    <ul>
                        <li><a href="./loot-table-fishing.html#treasure">treasure.jsonの定義</a></li>
                    </ul>
                    <ul>
                        <li><a href="./loot-table-fishing.html#last">おわりに</a></li>
                    </ul>

                    <h3 class="menu-page-title-link"><a href="./loot-table-drop.html">▶ドロップアイテム</a></h3>

                </div>
                <h2 class="menu-label">CONTENTS</h2>
                <h3 class="menu-label-sub">Browser</h3>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./chat.html">▶Webブラウザ間チャット</a></h3>

                    <h3 class="menu-page-title-link"><a href="./command.html">▶コマンド送信機能</a></h3>

                    <h3 class="menu-page-title-link"><a href="./shop.html">▶ネットショップ</a></h3>

                </div>
                <h3 class="menu-label-sub">Items</h3>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./bow-thunder.html">▶いなずまの弓</a></h3>

                    <h3 class="menu-page-title-link"><a href="./arrow-thunder.html">▶いなずまの矢</a></h3>

                    <h3 class="menu-page-title-link"><a href="./arrow-explode.html">▶はかいの矢</a></h3>

                    <h3 class="menu-page-title-link"><a href="./bow-mine.html">▶機雷の弓</a></h3>

                    <h3 class="menu-page-title-link"><a href="./sweep-rod.html">▶スウィープロッド(範囲攻撃)</a></h3>

                    <h3 class="menu-page-title-link"><a href="./stand.html">▶スタンドの弓矢</a></h3>

                    <h3 class="menu-page-title-link"><a href="./thunder-sword.html">▶いなずまの剣（改）</a></h3>

                    <h3 class="menu-page-title-link"><a href="./hayabusa-sword.html">▶はやぶさの剣</a></h3>

                    <h3 class="menu-page-title-link"><a href="./immovable-rod.html">▶不動の杖</a></h3>

                    <h3 class="menu-page-title-link"><a href="./immovable-rod-components.html">▶不動の杖構成アイテム</a></h3>

                </div>
                <h3 class="menu-label-sub">Others</h3>
                <div class="menu-text">

                    <h3 class="menu-page-title-link"><a href="./double-jump.html">▶二段ジャンプ</a></h3>

                    <h3 class="menu-page-title-link"><a href="./chair.html">▶階段チェア</a></h3>

                </div>
            </div>
            <div class="main">

                <h1>【釣りアイテム】</h1>

                <a id="begin"></a>
                <h2 class="subtitle">はじめに</h2>

                <div class="text-block">
                    ここでは本環境のビヘイビアパック内で定義しているオリジナルアイテムを例に挙げて、釣れるアイテムを定義するためのルートテーブル（Loot Table）の書き方をご紹介します。<br />
                    基本的な書き方は関数設定も含めて<font><a href="./loot-table.html">▶基本の書き方</a></font>の方でご紹介していますのでそちらをご覧ください。<br /><br />

                    ※ルートテーブルの記述はJSON形式なのでJSONの仕様を理解している前提で話を進めます。<br />
                </div><br />

                <a id="location"></a>
                <h2 class="subtitle">定義ファイルの所在</h2>
                <div class="text-block">
                    ビヘイビアパック内の<code>loot_tables/gameplay/fishing</code>というディレクトリ内で定義します。<br />
                    例えばバニラのビヘイビアパックの場合は以下の構成になっています。<br />

                    <span>釣れるアイテムを定義しているファイル</span>
                    <pre>
/<ビヘイビアパックのルート>
    /loot_tables
        /gameplay
            /fishing
                fish.json           魚を抽選するルートテーブル（デフォルト）
                jungle_fish.json    魚を抽選するルートテーブル（ジャングルバイオーム）
                junk.json           ジャンク品を抽選するルートテーブル（デフォルト）
                jungle_junk.json    ジャンク品を抽選するルートテーブル（ジャングルバイオーム）
                treasure.json       宝物を抽選するルートテーブル
            fishing.json            抽選を実行するルートテーブルを決めるための定義（デフォルト）
            jungle_fishing.json     抽選を実行するルートテーブルを決めるための定義（ジャングルバイオーム）
                    </pre><br />

                    これに対して本環境の構成は以下の通り。<br />

                    <span>本環境のビヘイビアパック内のルートテーブルの構成</span>
                    <pre>
/for-family
    /loot_tables
        /gameplay
            /fishing
                fish.json           魚を抽選するルートテーブル（デフォルト）
                jungle_fish.json    魚を抽選するルートテーブル（ジャングルバイオーム）
                treasure.json       宝物を抽選するルートテーブル
            fishing.json            抽選を実行するルートテーブルを決めるための定義（デフォルト）
                    </pre><br />

                    ご覧のように本環境では魚と宝物を抽選するためのルートテーブルのみ定義しています。<br />
                    それ以外はデフォルトのファイルが暗黙的に適用されます。
                </div><br />

                <a id="define"></a>
                <h2 class="subtitle">バニラの定義ファイルの内容</h2>
                <div class="text-block">

                    <br />
                    <h3 class="underline">デフォルトの設定</h3>

                    <span>gameplayディレクトリ直下のfishing.jsonファイル</span>
                    <pre>
{
    "pools": [
        {
            "rolls": 1,
            "entries": [
                {
                    "type": "loot_table",
                    "name": "loot_tables/gameplay/fishing/junk.json",
                    "weight": 10,
                    "quality": -2
                },
                {
                    "type": "loot_table",
                    "name": "loot_tables/gameplay/fishing/treasure.json",
                    "weight": 5,
                    "quality": 2
                },
                {
                    "type": "loot_table",
                    "name": "loot_tables/gameplay/fishing/fish.json",
                    "weight": 85,
                    "quality": -1
                }
            ]
        }
    ]
}
                    </pre><br />

                    このファイルでは抽選の対象とするルートテーブルを決定するための内容が定義されています。<br />
                    確率の高いものから順に取り上げると以下のようになります。<br />

                    <dl>
                        <dt>・fish.json（weight=85）</dt>
                        <dd>魚を抽選するルートテーブル。</dd>
                        <dt>・junk.json（weight=10）</dt>
                        <dd>ジャンク品を抽選するルートテーブル。</dd>
                        <dt>・treasure.json（weight=5）</dt>
                        <dd>宝物を抽選するルートテーブル。</dd>
                    </dl>

                    <br />
                    <h3 class="underline">ジャングルバイオームの設定</h3>

                    <span>gameplayディレクトリ直下のjungle_fishing.jsonファイル</span>
                    <pre>
{
    "pools": [
        {
            "rolls": 1,
            "entries": [
                {
                    "type": "loot_table",
                    "name": "loot_tables/gameplay/fishing/jungle_junk.json",
                    "weight": 10,
                    "quality": -2
                },
                {
                    "type": "loot_table",
                    "name": "loot_tables/gameplay/fishing/treasure.json",
                    "weight": 5,
                    "quality": 2
                },
                {
                    "type": "loot_table",
                    "name": "loot_tables/gameplay/fishing/jungle_fish.json",
                    "weight": 85,
                    "quality": -1
                }
            ]
        }
    ]
}
                    </pre><br />

                    このファイルではジャングルバイオーム限定で抽選の対象とするルートテーブルを決定するための内容が定義されています。<br />
                    確率の高いものから順に取り上げると以下のようになります。<br />

                    <dl>
                        <dt>・jungle_fish.json（weight=85）</dt>
                        <dd>魚を抽選するルートテーブル。</dd>
                        <dt>・jungle_junk.json（weight=10）</dt>
                        <dd>ジャンク品を抽選するルートテーブル。</dd>
                        <dt>・treasure.json（weight=5）</dt>
                        <dd>宝物を抽選するルートテーブル。</dd>
                    </dl>

                    上記の事から<code>treasure.json</code>のルートテーブルはデフォルトの設定でもジャングルバイオームの設定でも同じものが使われている事がわかると思います。<br /><br />

                    ※デフォルト／ジャングルバイオームの設定共に<code>quality</code>（プレイヤーの幸運属性）の項目が使用されています。これはJava版限定なので機能はしていませんがバニラデータには定義されています。<br />
                </div><br />

                <a id="fish"></a>
                <h2 class="subtitle">fish.jsonの定義</h2>
                <div class="text-block">
                    本環境では「生さんま」を追加で釣れるように設定しています。<br /><br />

                    ※以下の黄色の部分が今回追加しているところです。<br />

                    <span>fish.jsonファイルの内容</span>
                    <pre>
{
    "pools": [
        {
            "rolls": 1,
            "entries": [
                {
                    "type": "item",
                    "name": "minecraft:fish",
                    "weight": 30
                },
                {
                    "type": "item",
                    "name": "minecraft:salmon",
                    "weight": 25
                },
                {
                    "type": "item",
                    "name": "minecraft:clownfish",
                    "weight": 2
                },
                {
                    "type": "item",
                    "name": "minecraft:pufferfish",
                    "weight": 13
                },
<font class="pre-yellow">
                {
                    "type": "item",
                    "name": "customize:sanma",
                    "weight": 30
                }
</font>
            ]
        }
    ]
}
                    </pre><br />

                    このファイルでは<code>weight</code>の配分の合計が元々百分率で計算できるように１００で設定されているようなので<code>minecraft:fish</code>の６０の値を半分ずつ分け合って<code>customize:sanma</code>と同率になるようにしています。
                </div><br />

                <a id="jungle_fish"></a>
                <h2 class="subtitle">jungle_fish.jsonの定義</h2>
                <div class="text-block">
                    本環境ではジャングルバイオームでも「生さんま」を追加で釣れるように設定しています。<br /><br />

                    ※以下の黄色の部分が今回追加しているところです。<br />

                    <span>jungle_fish.jsonファイルの内容</span>
                    <pre>
{
    "pools": [
        {
            "rolls": 1,
            "entries": [
                {
                    "type": "item",
                    "name": "minecraft:fish",
                    "weight": 30
                },
                {
                    "type": "item",
                    "name": "minecraft:salmon",
                    "weight": 40
                },
<font class="pre-yellow">
                {
                    "type": "item",
                    "name": "customize:sanma",
                    "weight": 30
                }
</font>
            ]
        }
    ]
}
                    </pre><br />

                    このファイルでは<code>weight</code>の配分の合計が元々百分率で計算できるように１００で設定されているようなので<code>minecraft:fish</code>の６０の値を半分ずつ分け合って<code>customize:sanma</code>と同率になるようにしています。
                </div><br />

                <a id="treasure"></a>
                <h2 class="subtitle">treasure.jsonの定義</h2>
                <div class="text-block">
                    本環境では「不動の杖」の材料となる「不動の魔石（customize:immovable_stone）」と「浮遊の羽（customize:floating_feather）」の素材を釣りで取得できるように設定しています。<br />
                    分類としては宝物になるため、今回は<code>treasure.json</code>ファイルに以下のように定義しています。<br /><br />

                    ※以下の黄色の部分が今回追加しているところです。<br />

                    <span>treasure.jsonファイルの内容</span>
                    <pre>
{
    "pools": [
        {
            "rolls": 1,
            "entries": [
                {
                    "type": "item",
                    "name": "minecraft:nautilus_shell",
                    "weight": 5
                },
                {
                    "type": "item",
                    "name": "minecraft:waterlily",
                    "weight": 5
                },
                {
                    "type": "item",
                    "name": "minecraft:name_tag",
                    "weight": 5
                },
                {
                    "type": "item",
                    "name": "minecraft:saddle",
                    "weight": 5
                },
                {
                    "type": "item",
                    "name": "minecraft:bow",
                    "weight": 5,
                    "functions": [
                        {
                            "function": "set_damage",
                            "damage": {
                                "min": 0,
                                "max": 0.25
                            }
                        },
                        {
                            "function": "enchant_with_levels",
                            "levels": 30,
                            "treasure": true
                        }
                    ]
                },
                {
                    "type": "item",
                    "name": "minecraft:fishing_rod",
                    "weight": 5,
                    "functions": [
                        {
                            "function": "set_damage",
                            "damage": {
                                "min": 0,
                                "max": 0.25
                            }
                        },
                        {
                            "function": "enchant_with_levels",
                            "levels": 30,
                            "treasure": true
                        }
                    ]
                },
                {
                    "type": "item",
                    "name": "minecraft:book",
                    "weight": 6,
                    "functions": [
                        {
                            "function": "enchant_with_levels",
                            "levels": 30,
                            "treasure": true
                        }
                    ]
                },
<font class="pre-yellow">
                {
                    "type": "item",
                    "name": "customize:immovable_stone",
                    "weight": 5,
                    "functions": [
                        {
                            "function": "set_name",
                            "name": "不動の魔石"
                        },
                        {
                            "function": "set_lore",
                            "lore": [
                                "動くものを足止めする力を秘めている"
                            ]
                        }
                    ]
                },
                {
                    "type": "item",
                    "name": "customize:floating_feather",
                    "weight": 6,
                    "functions": [
                        {
                            "function": "set_name",
                            "name": "浮遊の羽"
                        },
                        {
                            "function": "set_lore",
                            "lore": [
                                "浮力を付与する効果がある"
                            ]
                        }
                    ]
                }
</font>
            ]
        }
    ]
}
                    </pre><br />

                </div><br />

                <a id="last"></a>
                <h2 class="subtitle">おわりに</h2>
                <div class="text-block">
                    登録した釣りアイテムを確認する際は「入れ食い」のエンチャントを付与した釣り竿を使った方が時間短縮になります。<br />
                    また、そのままでは確率まかせになってしまうのであまり効率的とは言えません。今回の場合、宝物アイテムを登録しているので<code>gameplay</code>直下の<code>fishing.json</code>を一時的に修正するのがいいでしょう。<br /><br />

                    例えば魚のルートテーブルとジャンク品のルートテーブルの<code>weight</code>値をゼロにしておけば１００％の確率で宝物を引き当てる事ができます。<br />
                    本環境のビヘイビアパックにはバニラデータのまま入れていますが、この時のためにすぐに対応できるよう敢えて同梱しています。<br /><br />

                    あとは<code>treasure.json</code>の中にもお目当てのアイテム以外の定義が入っていますので、他のアイテムの<code>weight</code>値をゼロにするか、お目当てのアイテムだけ異様に高い数値にすれば対応できるでしょう。<br /><br />

                    ※カスタムアイテムの場合、アイテム名の前に必ずネームスペース（今回の場合は”customize”）を付けるようにしましょう。
                </div><br />
            </div>
        </div>
    </body>
</html>
